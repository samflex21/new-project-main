{% macro line_chart_panel(title, id, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#" onclick="downloadChart('{{ id }}', '{{ title }}'); return false;">
                    <i class="fas fa-download fa-sm fa-fw me-2 text-gray-400"></i>Download
                </a>
                <a class="dropdown-item" href="#" onclick="document.getElementById('{{ id }}').parentNode.requestFullscreen(); return false;">
                    <i class="fas fa-expand fa-sm fa-fw me-2 text-gray-400"></i>Fullscreen
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-container" style="position: relative; height:300px;">
            <canvas id="{{ id }}"></canvas>
        </div>
    </div>
</div>
{% endmacro %}

{% macro bar_chart_panel(title, id, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#" onclick="downloadChart('{{ id }}', '{{ title }}'); return false;">
                    <i class="fas fa-download fa-sm fa-fw me-2 text-gray-400"></i>Download
                </a>
                <a class="dropdown-item" href="#" onclick="document.getElementById('{{ id }}').parentNode.requestFullscreen(); return false;">
                    <i class="fas fa-expand fa-sm fa-fw me-2 text-gray-400"></i>Fullscreen
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-container" style="position: relative; height:300px;">
            <canvas id="{{ id }}"></canvas>
        </div>
    </div>
</div>
{% endmacro %}

{% macro radar_chart_panel(title, id, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#" onclick="downloadChart('{{ id }}', '{{ title }}'); return false;">
                    <i class="fas fa-download fa-sm fa-fw me-2 text-gray-400"></i>Download
                </a>
                <a class="dropdown-item" href="#" onclick="document.getElementById('{{ id }}').parentNode.requestFullscreen(); return false;">
                    <i class="fas fa-expand fa-sm fa-fw me-2 text-gray-400"></i>Fullscreen
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-container" style="position: relative; height:300px;">
            <canvas id="{{ id }}"></canvas>
        </div>
    </div>
</div>
{% endmacro %}

{% macro pie_chart_panel(title, id, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#" onclick="downloadChart('{{ id }}', '{{ title }}'); return false;">
                    <i class="fas fa-download fa-sm fa-fw me-2 text-gray-400"></i>Download
                </a>
                <a class="dropdown-item" href="#" onclick="document.getElementById('{{ id }}').parentNode.requestFullscreen(); return false;">
                    <i class="fas fa-expand fa-sm fa-fw me-2 text-gray-400"></i>Fullscreen
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-container" style="position: relative; height:300px;">
            <canvas id="{{ id }}"></canvas>
        </div>
    </div>
</div>
{% endmacro %}

{% macro gauge_chart_panel(title, id, value, min_value, max_value, color_scheme, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-gauge" id="{{ id }}" 
             data-value="{{ value }}" 
             data-min="{{ min_value }}" 
             data-max="{{ max_value }}"
             data-colors="{{ color_scheme }}">
        </div>
        <div class="text-center mt-2">
            <span class="h4">{{ value }}</span>
            <span class="text-muted">/ {{ max_value }}</span>
        </div>
    </div>
</div>
{% endmacro %}

{% macro heatmap_panel(title, id, description=None) %}
<div class="card shadow mb-4">
    <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
        <h6 class="m-0 font-weight-bold text-white">{{ title }}</h6>
        <div class="dropdown no-arrow">
            <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-end">
                <a class="dropdown-item" href="#" onclick="downloadChart('{{ id }}', '{{ title }}'); return false;">
                    <i class="fas fa-download fa-sm fa-fw me-2 text-gray-400"></i>Download
                </a>
                <a class="dropdown-item" href="#" onclick="document.getElementById('{{ id }}').parentNode.requestFullscreen(); return false;">
                    <i class="fas fa-expand fa-sm fa-fw me-2 text-gray-400"></i>Fullscreen
                </a>
            </div>
        </div>
    </div>
    <div class="card-body">
        {% if description %}
        <p>{{ description }}</p>
        {% endif %}
        <div class="chart-container" style="position: relative; height:300px;">
            <canvas id="{{ id }}"></canvas>
        </div>
    </div>
</div>
{% endmacro %}

<div class="col-xl-6 mb-4">
    <div class="card shadow h-100">
        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
            <h6 class="m-0 font-weight-bold text-primary">Distribution of Exercise vs Sleep</h6>
            <div class="dropdown no-arrow">
                <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                </a>
                <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in" aria-labelledby="dropdownMenuLink">
                    <div class="dropdown-header">Chart Options:</div>
                    <a class="dropdown-item" href="#" onclick="exportToCSV('exerciseSleepData', 'exercise_sleep_data')">Export Data</a>
                    <a class="dropdown-item" href="#">View Details</a>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="chart-area">
                <canvas id="exerciseSleepChart"></canvas>
            </div>
            <p class="mt-2 small text-muted">Checks if lifestyle balance impacts risk. Data from Lifestyle and RiskAssessment tables.</p>
        </div>
    </div>
</div>
